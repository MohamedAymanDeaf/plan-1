<odoo>
    <!-- Groups -->
    <record id="group_workshop_user" model="res.groups">
        <field name="name">Workshop User</field>
    </record>

    <record id="group_workshop_manager" model="res.groups">
        <field name="name">Workshop Manager</field>
        <field name="implied_ids" eval="[(4, ref('group_workshop_user'))]"/>
    </record>

    <!-- Record Rules -->
    <record id="job_rule_user" model="ir.rule">
        <field name="name">Job: User Own Company</field>
        <field name="model_id" ref="model_job"/>
        <field name="groups" eval="[(4, ref('wm_module.group_workshop_user'))]"/>
        <field name="domain_force">[('company_id', 'in', user.company_ids.ids)]</field>
    </record>

    <record id="part_rule_user" model="ir.rule">
        <field name="name">Part: User Own Company</field>
        <field name="model_id" ref="model_part"/>
        <field name="groups" eval="[(4, ref('wm_module.group_workshop_user'))]"/>
        <field name="domain_force">[('company_id', 'in', user.company_ids.ids)]</field>
    </record>

    <record id="order_rule_user" model="ir.rule">
        <field name="name">Order: User Own Company</field>
        <field name="model_id" ref="model_order"/>
        <field name="groups" eval="[(4, ref('wm_module.group_workshop_user'))]"/>
        <field name="domain_force">[('company_id', 'in', user.company_ids.ids)]</field>
    </record>

    <record id="order_line_rule_user" model="ir.rule">
        <field name="name">Order Line: User Own Company</field>
        <field name="model_id" ref="model_order_line"/>
        <field name="groups" eval="[(4, ref('wm_module.group_workshop_user'))]"/>
        <field name="domain_force">[('company_id', 'in', user.company_ids.ids)]</field>
    </record>

    <!-- Managers: full access -->
    <record id="job_rule_manager" model="ir.rule">
        <field name="name">Job: Manager All Companies</field>
        <field name="model_id" ref="model_job"/>
        <field name="groups" eval="[(4, ref('wm_module.group_workshop_manager'))]"/>
        <field name="domain_force">[(1, '=', 1)]</field>
    </record>

    <record id="part_rule_manager" model="ir.rule">
        <field name="name">Part: Manager All Companies</field>
        <field name="model_id" ref="model_part"/>
        <field name="groups" eval="[(4, ref('wm_module.group_workshop_manager'))]"/>
        <field name="domain_force">[(1, '=', 1)]</field>
    </record>

    <record id="order_rule_manager" model="ir.rule">
        <field name="name">Order: Manager All Companies</field>
        <field name="model_id" ref="model_order"/>
        <field name="groups" eval="[(4, ref('wm_module.group_workshop_manager'))]"/>
        <field name="domain_force">[(1, '=', 1)]</field>
    </record>

    <record id="order_line_rule_manager" model="ir.rule">
        <field name="name">Order Line: Manager All Companies</field>
        <field name="model_id" ref="model_order_line"/>
        <field name="groups" eval="[(4, ref('wm_module.group_workshop_manager'))]"/>
        <field name="domain_force">[(1, '=', 1)]</field>
    </record>
</odoo>
